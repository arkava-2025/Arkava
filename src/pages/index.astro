---
import type { HomePageQuery } from '@/gql/graphql';
import getHomePage from '@/lib/hygraph/queries/getHomePage';
import BaseLayout from '@/layouts/BaseLayout.astro';
import ComponentRenderer from '@/components/ComponentRenderer.astro';
import { isPreview } from '@/PageRenderer';

const { page }: HomePageQuery = await getHomePage(
  'home',
  isPreview() ? 'DRAFT' : 'PUBLISHED',
);

const allSections = page?.sections ?? [];
---

<BaseLayout title={page?.title ?? 'Arkava'}>
  <div class="mb-6">
    {
      allSections.map((section: any) => {
        return (
          <ComponentRenderer
            data={section.content}
            animate={true}
            useTailwind={true}
          />
        );
      })
    }
  </div>
</BaseLayout>
